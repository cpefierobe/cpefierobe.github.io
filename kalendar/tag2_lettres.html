<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Im Koffer von Rick</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;line-height:1.45}
    body{margin:24px;background:#f7f7fb;color:#111}
    .card{max-width:760px;margin:0 auto;background:white;border-radius:12px;padding:20px 22px;box-shadow:0 6px 20px rgba(16,24,40,0.08)}
    h1{font-size:1.25rem;margin:0 0 12px}
    p.lead{margin:0 0 18px;color:#374151}
    .links{display:flex;gap:12px;flex-wrap:wrap}
    .links a{display:inline-block;padding:8px 12px;border-radius:8px;text-decoration:none;background:#eef2ff;color:#312e81;font-weight:600;border:1px solid rgba(49,46,129,0.08)}
    details{margin-top:14px;border-radius:8px;padding:12px;background:#fafafa;border:1px solid #e6e9ef}
    summary{list-style:none;cursor:default;outline:none}
    .letter-content{margin-top:10px}
    .svg-image{max-width:100%;height:auto;border-radius:8px;border:1px solid #e2e8f0}
    .muted{color:#6b7280;font-size:0.95rem}
    .footer{margin-top:18px;font-size:0.9rem;color:#6b7280}
    /* simple transition for reveal */
    details[open] .letter-content{animation:fadeIn .18s ease-out}
    @keyframes fadeIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:none}}
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Im Koffer von Rick</h1>
    <p class="lead">Im Koffer von Rick befinden sich vier Briefe: </p>

    <nav class="links" aria-label="Briefliste">
      <a href="#letter1" class="toggle" data-target="letter1">Brief 1</a>
      <a href="#letter2" class="toggle" data-target="letter2">Brief 2</a>
      <a href="#letter3" class="toggle" data-target="letter3">Brief 3</a>
      <a href="#letter4" class="toggle" data-target="letter4">Brief 4</a>
    </nav>

    <!-- Details-blocks provide accessible collapse behaviour; links will toggle them via JS -->
    <details id="letter1" aria-labelledby="link-letter1">
      <summary id="link-letter1">Brief 1 — Instruktionen</summary>
      <div class="letter-content">
        <p>Morty,</p> 
        <p>ich befinde mich irgendwo in der Galaxie.</p>
        <p>Meine Position habe ich verschlüsselt in den Briefen Nr. 2 und 3 hinterlegt. Ich habe Hinweise eingebaut, damit du sie entschlüsseln kannst.</p>
        <p>Später wirst du auch Brief Nr. 4 benötigen.</p>
        <p class="muted">— R.</p>
      </div>
    </details>
    
    <details id="letter2" aria-labelledby="link-letter2">
      <summary id="link-letter2">Brief 2 — Kode Teil 1</summary>
      <div class="letter-content">
        <p>ÄQ8A</p>
      </div>
    </details>

    <details id="letter3" aria-labelledby="link-letter3">
      <summary id="link-letter2">Brief 3 — Kode Teil 2</summary>
      <div class="letter-content"  style="text-align: center;">
        <figure>
          <img id="monImage" src="img/KodeBild.png" style="width: 100%;"/>
        </figure>

  <!-- Bouton pour télécharger l'image -->
  <button id="telechargerBtn">Herunterladen</button>

  <script>
    const btn = document.getElementById('telechargerBtn');
    const img = document.getElementById('monImage');

    btn.addEventListener('click', () => {
      // Créer un lien temporaire
      const lien = document.createElement('a');
      lien.href = img.src;
      lien.download = 'Kode2.jpg'; // Nom du fichier téléchargé
      document.body.appendChild(lien);
      lien.click();
      document.body.removeChild(lien);
    });
  </script>
      </div>
    </details>

    <details id="letter4" aria-labelledby="link-letter4">
      <summary id="link-letter4">Brief 4 — Hinweis</summary>
      <div class="letter-content">
        <figure>
          <img src="img/kochsche_schneeflocke.svg" style="width: 100%;"/>
          <figcaption style="text-align:center;">Kochsche Schneeflocke</figcaption>
        </figure>
      </div>
    </details>

  </main>

  <script>
    // Enhance link behavior: clicking a link toggles the corresponding <details> element.
    document.querySelectorAll('a.toggle').forEach(link => {
      const targetId = link.dataset.target;
      const target = document.getElementById(targetId);
      if(!target) return;
      link.addEventListener('click', (e) => {
        e.preventDefault();
        // Toggle open attribute
        const isOpen = target.hasAttribute('open');
        // Close other details (optional): comment out to allow multiple open
        document.querySelectorAll('details').forEach(d => d.removeAttribute('open'));
        if(!isOpen) target.setAttribute('open', '');
        // Move focus to the details element for accessibility
        target.scrollIntoView({behavior: 'smooth', block: 'center'});
        target.querySelector('.letter-content')?.focus();
      });
    });

    // Allow Enter/Space on links to toggle (already handled by click), and ensure keyboard users can interact.
  </script>
</body>
</html>

